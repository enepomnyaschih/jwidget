/*!
	jWidget UI 1.4.6

	http://enepomnyaschih.github.io/jwidget/#!/guide/home

	Copyright (C) 2015 Egor Nepomnyaschih

	This program is free software: you can redistribute it and/or modify
	it under the terms of the GNU Lesser General Public License as published by
	the Free Software Foundation, either version 3 of the License, or
	(at your option) any later version.

	This program is distributed in the hope that it will be useful,
	but WITHOUT ANY WARRANTY; without even the implied warranty of
	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
	GNU Lesser General Public License for more details.

	You should have received a copy of the GNU Lesser General Public License
	along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/
JW.UI={wrapMap:{option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]},rtagName:/^<([\w:]+)/,hash:null,template:function(a,b){b=JW.Map.map(b,function(c){return new JW.UI.Component.Template(c)});if(a.prototype.Templates&&a.prototype.Templates.componentCls==a){JW.apply(a.prototype.Templates.prototype,b)}else{a.prototype.Templates=(a.superclass.Templates||JW.Class).extend(b);a.prototype.Templates.componentCls=a;a.prototype.templates=new a.prototype.Templates()}},isElement:function(a){return a instanceof jQuery.fn.init},preventDefault:function(a){a.preventDefault()},isLifeInput:function(c){c=jQuery(c);var a=c[0].tagName.toLowerCase();if(a==="input"){var b=c.attr("type");return(b==="text")||(b!=="password")}return a==="textarea"},insert:function(b,c,a){if(!JW.isSet(a)||(a>=b.childNodes.length)){b.appendChild(c)}else{b.insertBefore(c,b.childNodes.item(a))}},remove:function(a){if(a.parentNode){a.parentNode.removeChild(a)}},parseHtml:function(c){if(JW.UI._fragment){JW.UI._fragment.textContent=""}else{JW.UI._fragment=document.createDocumentFragment()}var e=JW.UI._fragment.appendChild(document.createElement("div"));var b=JW.UI.rtagName.exec(c)[1];var d=JW.UI.wrapMap[b]||JW.UI.wrapMap._default;e.innerHTML=d[1]+c+d[2];for(var a=0;a<d[0];++a){e=e.firstChild}return e.firstChild},hasClass:function(b,a){return(" "+b.className+" ").indexOf(a)!==-1},addClass:function(b,a){if(!b.className){b.className=a}else{if(!JW.UI.hasClass(b,a)){b.className+=" "+a}}},inDom:function(a){while(a){if(a.tagName.toLowerCase()==="body"){return true}a=a.parentNode}return false},inEl:function(a,b){while(a){if(a===b){return true}a=a.parentNode}return false},replace:function(d,f,b){var c=d.parentNode;if(!c){return}var e=b?d.getAttribute("id"):null,a=b?d.getAttribute("class"):null;c.replaceChild(f,d);if(e){f.setAttribute("id",e)}if(a){JW.UI.addClass(f,a)}},_afterAppend:function(a){a._afterAppend()}};(function(a){a.optgroup=a.option;a.tbody=a.tfoot=a.colgroup=a.caption=a.thead;a.th=a.td})(JW.UI.wrapMap);jQuery(function(){JW.UI.windowEl=jQuery(window);JW.UI.bodyEl=jQuery(document.body)});JW.UI.JQEventAttachment=function(e,b,a,d,c){JW.UI.JQEventAttachment._super.call(this);this.el=e;this.events=b;if(typeof a==="function"||typeof a==="boolean"){c=d;d=a;a=null}this.selector=a;if(c&&typeof d==="function"){this.handler=function(f){return d.call(c||this,f,this)}}else{this.handler=d}e.on(b,this.selector,this.handler)};JW.extend(JW.UI.JQEventAttachment,JW.Class,{destroyObject:function(){this.el.off(this.events,this.selector,this.handler);this._super()}});jQuery.extend(jQuery.fn,{jwon:function(b,a,d,c){return new JW.UI.JQEventAttachment(this,b,a,d,c)},jwattr:function(a,b){return new JW.UI.AttrUpdater(this,a,b)},jwclass:function(){var d=arguments[0],c=arguments[1];return(c!=null)?new JW.UI.ClassUpdater(this,d,c):new JW.UI.ClassNameUpdater(this,d)},jwcss:function(a,b){return new JW.UI.CssUpdater(this,a,b)},jwhtml:function(a){return new JW.UI.HtmlUpdater(this,a)},jwprop:function(d,a,c){if(a!=null){return new JW.UI.PropBinding(this,d,a,c)}if(d==="checked"){var b=new JW.Property();b.own(new JW.UI.CheckedListener(this,{target:b}));return b}throw new Error("Invalid argument")},jwradio:function(a,b,d){if(b!=null){return new JW.UI.RadioBinding(this,a,b,d)}var c=new JW.Property();c.own(new JW.UI.RadioListener(this,a,{target:c}));return c},jwtext:function(a){return new JW.UI.TextUpdater(this,a)},jwval:function(a,c,d){if(a!=null&&(typeof a!=="boolean")){return new JW.UI.ValueBinding(this,a,c,d)}var b=new JW.Property();b.own(new JW.UI.ValueListener(this,{target:b,simple:d}));return b},jwshow:function(a){return new JW.UI.VisibleUpdater(this,a)}});JW.UI.Browsers=(function(){ua=navigator.userAgent.toLowerCase();function y(H){return H.test(ua)}var j=document.compatMode=="CSS1Compat",l=document.documentMode,C=y(/opera/),n=C&&y(/version\/10\.5/),g=y(/\bchrome\b/),t=y(/webkit/),x=!g&&y(/safari/),f=x&&y(/applewebkit\/4/),c=x&&y(/version\/3/),G=x&&y(/version\/4/),E=x&&y(/version\/5/),s=!C&&y(/msie/),q=s&&(y(/msie 7/)||l==7),p=s&&(y(/msie 8/)&&l!=7&&l!=9||l==8),o=s&&(y(/msie 9/)&&l!=7&&l!=8||l==9),r=s&&y(/msie 6/),m=!t&&y(/gecko/),e=m&&y(/rv:1\.8/),b=m&&y(/rv:1\.9/),F=m&&y(/rv:2\.0/),D=m&&y(/rv:5\./),a=b&&y(/rv:1\.9\.0/),B=b&&y(/rv:1\.9\.1/),A=b&&y(/rv:1\.9\.2/),w=s&&!j,z=y(/windows|win32/),i=y(/macintosh|mac os x/),h=y(/adobeair/),k=y(/linux/),v=y(/ipad/),d=/^https/i.test(window.location.protocol);var u=!(t||v);return{isStrict:j,isOpera:C,isOpera10_5:n,isChrome:g,isWebKit:t,isSafari:x,isSafari2:f,isSafari3:c,isSafari4:G,isSafari5:E,isIE:s,isIE7:q,isIE8:p,isIE9:o,isIE6:r,isGecko:m,isGecko2:e,isGecko3:b,isGecko4:F,isGecko5:D,isFF3_0:a,isFF3_5:B,isFF3_6:A,isBorderBox:w,isWindows:z,isMac:i,isAir:h,isLinux:k,isIPad:v,isSecure:d,isPaddingWideTd:u}})();JW.UI.Inserter=function(b,a){JW.UI.Inserter._super.call(this);this.el=a;this.own(b.createInserter({addItem:this._addItem,removeItem:this._removeItem,scope:this}))};JW.extend(JW.UI.Inserter,JW.Class,{_getElement:function(a){return a},_addItem:function(d,b){var c=this.el;var a=c.childNodes[b];var e=this._getElement(d);if(a!=null){c.insertBefore(e,a)}else{c.appendChild(e)}},_removeItem:function(a){JW.UI.remove(this._getElement(a))}});JW.UI.Component=function(){JW.UI.Component._super.call(this);this.parent=null;this.wasAfterAppend=false;this.el=null;this.children=null;this._template=this.templates.main;this._elements=null;this._replaceables=null;this._arrays=null;this._collections=null},JW.extend(JW.UI.Component,JW.Class,{destroy:function(){if(this.parent){throw new Error("JW.UI.Component.destroy must be used for root and detached components only")}if(this.wasAfterAppend){this.releaseDom()}if(this.el){JW.UI.remove(this.el[0]);JW.Set.each(this._collections,JW.destroy);this._collections=null;JW.Set.each(this._arrays,JW.destroy);this._arrays=null;JW.Set.each(this._replaceables,JW.destroy);this._replaceables=null;this.children.unrender()}this._super()},destroyObject:function(){if(this.el){this.unrender();this.children.destroy();this.children=null;this.el.remove()}this._elements=null;this.el=null;this.afterDestroy();this._super()},beforeRender:function(){},afterRender:function(){},afterAppend:function(){},releaseDom:function(){},unrender:function(){},afterDestroy:function(){},using:function(a){this._template=(typeof a==="string")?new JW.UI.Component.Template(a):(a instanceof JW.UI.Component.Template)?a:new JW.UI.Component.DomTemplate(a);return this},render:function(){if(this.el){return this}var c=this._template.createElement();this.el=jQuery(c.root);this._elements=JW.Map.map(c.groups,jQuery);this.children=new JW.UI.Component.Children(this);this._replaceables={};this._arrays={};this._collections={};this.beforeRender();var f=JW.apply({},this._elements);for(var h in f){var e=f[h];var g=JW.Array.filter(e,function(i){return JW.UI.inEl(i,this.el[0])},this);if(g.length===0){delete this._elements[h];continue}if(g.length!==e.length){e=jQuery(g);this._elements[h]=e}var b=JW.String.camel(h);var d="render"+JW.String.capitalize(b);if(typeof this[d]==="function"){var a=this[d](e);
if(h==="root"){if(a instanceof JW.AbstractArray){this.addArray(a,h)}else{if(a instanceof JW.AbstractCollection){this.addCollection(a,h)}}}else{if(a instanceof JW.UI.Component){this.children.set(a,h)}else{if(a instanceof JW.Property){this.addReplaceable(a,h)}else{if(a instanceof JW.AbstractArray){this.addArray(a,h)}else{if(a instanceof JW.AbstractCollection){this.addCollection(a,h)}else{if(a===false){this.removeElement(h)}}}}}}}}this.afterRender();if(this._template.requiresAfterAppend){this._afterAppend()}return this},renderTo:function(a){this.render();jQuery(a)[0].appendChild(this.el[0]);this._afterAppend();return this},renderAs:function(a){this.render();JW.UI.replace(jQuery(a)[0],this.el[0],true);this._afterAppend();return this},remove:function(){if(this.parent){throw new Error("JW.UI.Component.remove must be used for root components only")}JW.UI.remove(this.el[0]);return this},getElement:function(a){return this._elements[a]},removeElement:function(b){var a=this._elements[b];if(!a){return}a.remove();delete this._elements[b]},addReplaceable:function(a,b){return new JW.UI.Component.Replaceable(this,a,b)},addArray:function(b,a){return new JW.UI.Component.Array(this,b,this._getContainerElement(a))},addCollection:function(b,a){return new JW.UI.Component.Collection(this,b,this._getContainerElement(a))},_afterAppend:function(){if(this.wasAfterAppend||!this.el){return}if(this.parent&&!this.parent.wasAfterAppend){return}if(!this.parent&&!JW.UI.inDom(this.el[0])){return}this.wasAfterAppend=true;this.afterAppend();this.children.each(JW.UI._afterAppend);JW.Set.each(this._arrays,JW.UI._afterAppend);JW.Set.each(this._collections,JW.UI._afterAppend)},_initChild:function(a){a.render();a.parent=this},_doneChild:function(a){a.parent=null},_getContainerElement:function(a){return(a===undefined)?this.el:(typeof a==="string")?this._elements[a]:jQuery(a)}});JW.UI.Component.EventParams=function(a){JW.UI.Component.EventParams._super.call(this,a)};JW.extend(JW.UI.Component.EventParams,JW.EventParams,{});JW.UI.Component.AbstractTemplate=function(){JW.UI.Component.AbstractTemplate._super.call(this);this.prefixes=null;this.parentIdMap=null;this.childIdMap=null;this.ids=null};JW.extend(JW.UI.Component.AbstractTemplate,JW.Class,{_compileAttributes:function(b){this.prefixes=JW.String.parseClass(b.getAttribute("jwclass"));b.removeAttribute("jwclass");for(var c=0,a=this.prefixes.length;c<a;++c){JW.UI.addClass(b,this.prefixes[c])}this.parentIdMap={};this.childIdMap={};this._walkAll(b);this.ids=[];this._backtrace("root");var d=JW.Map.getKeys(this.parentIdMap);if(d.length!==0){JW.Array.each(d,this._backtrace,this);d=JW.Map.getKeys(this.parentIdMap);if(d.length!==0){console.warn("jWidget template '"+this.prefixes.join(" ")+"' has cyclic dependencies among the next jwid's: "+d.join(", ")+". Can't detect the desired rendering order. Rendering elements in arbitrary order...");this.ids.push.apply(this.ids,d)}}this.prefixes=null;this.parentIdMap=null;this.childIdMap=null},_walkAll:function(a){var b=[];this._walk(a,b,[],function(e,o){var m=e.getAttribute("jwid");if(!m){return null}var c=JW.String.parseClass(m);e.removeAttribute("jwid");var g=c.length;if(g===0){return null}for(var k=0;k<g;++k){var d=c[k];for(var h=0,f=this.prefixes.length;h<f;++h){JW.UI.addClass(e,this.prefixes[h]+"-"+d)}this._addElement(d,e,o)}return c},this);this._addElement("root",a,[])},_walk:function(a,q,r,o,p){if(a.nodeType!==1){return}var f=o.call(p,a,q);if(q.length===0){f=f||[];f.push("root")}if(f!==null){for(var g=0,c=f.length;g<c;++g){var d=f[g];this.parentIdMap[d]=this.parentIdMap[d]||{};for(var e=0,b=r.length;e<b;++e){var h=r[e];this.childIdMap[h]=this.childIdMap[h]||{};this.parentIdMap[d][h]=true;this.childIdMap[h][d]=true}}r=f}var k=q.length;q.push(0);var n=a.childNodes;for(var g=0,c=n.length;g<c;++g){q[k]=g;this._walk(n[g],q,r,o,p)}q.pop()},_backtrace:function(e){var a=this.parentIdMap[e];if(a===undefined){return}for(var d in a){if(this.parentIdMap.hasOwnProperty(d)){return}}delete this.parentIdMap[e];this.ids.push(e);var b=this.childIdMap[e];for(var c in b){this._backtrace(c)}}});JW.UI.Component.Array=function(b,c,a){JW.UI.Component.Array._super.call(this);this.parent=b;this.source=c;JW.Set.add(b._arrays,this);this._mapper=c.createMapper({createItem:function(d){this.parent._initChild(d);return d},destroyItem:function(d){this.parent._doneChild(d)},scope:this});this._inserter=new JW.UI.Component.Inserter(this._mapper.target,a[0])};JW.extend(JW.UI.Component.Array,JW.Class,{destroyObject:function(){this._inserter.destroy();this._inserter=null;this._mapper.destroy();this._mapper=null;JW.Set.remove(this.parent._arrays,this);this._super()},_afterAppend:function(){this.source.each(JW.UI._afterAppend)}});JW.UI.Component.Child=function(a,b){JW.UI.Component.Child._super.call(this);this.parent=a;this.child=b;this.name=null;this._el=null};JW.extend(JW.UI.Component.Child,JW.Class,{attach:function(a){this.name=a;this._el=this.parent._elements[a];this.parent._initChild(this.child);this.parent._elements[a]=this.child.el;JW.UI.replace(this._el[0],this.child.el[0],true);this.child._afterAppend()},detach:function(){if(this.parent._elements[this.name]===this.child.el){this.parent._elements[this.name]=this._el}JW.UI.replace(this.child.el[0],this._el[0]);this.parent._doneChild(this.child);this._el=null;this.name=null}});JW.UI.Component.ChildInserter=function(){JW.UI.Component.ChildInserter._super.call(this)};JW.extend(JW.UI.Component.ChildInserter,JW.AbstractMap,{trySet:function(d,b){var a=this._super(d,b);if(a===undefined){return}var c=a.get();if(c){c.detach()}d.attach(b);return a},setAll:function(a){this.trySetAll(a)},trySetKey:function(b,c){var a=this._super(b,c);if(a===undefined){return}a.detach();a.attach(c);return a},tryRemove:function(a){var b=this._super(a);if(b===undefined){return}b.detach();return b},removeAll:function(a){this.tryRemoveAll(a)},trySplice:function(a,b){var c=this._super(a,b);if(c===undefined){return}JW.Map.each(c.removedItems,this._detach,this);JW.Map.each(c.addedItems,this._attach,this);return c},tryClear:function(){var a=this._super();if(a===undefined){return}JW.Map.each(a,this._detach,this);return a},tryReindex:function(e){var a=this._super(e);if(a===undefined){return}for(var c in e){var d=e[c];var b=this.get(d);b.detach();b.attach(d)}return a},_attach:function(b,a){b.attach(a)},_detach:function(a){a.detach()}});JW.UI.Component.Children=function(a){JW.UI.Component.Children._super.call(this);this.component=a;this.target=new JW.UI.Component.ChildInserter()};JW.extend(JW.UI.Component.Children,JW.AbstractMap,{unrender:function(){this.target.destroy()},trySet:function(c,b){var a=this._super(c,b);if(a===undefined){return}var d=new JW.UI.Component.Child(this.component,c);this.target.trySet(d,b);return a},setAll:function(a){this.trySetAll(a)},trySetKey:function(b,c){var a=this._super(b,c);if(a===undefined){return}this.target.trySetKey(b,c);return a},tryRemove:function(a){var b=this._super(a);if(b===undefined){return}this.target.tryRemove(a);return b},removeAll:function(a){this.tryRemoveAll(a)},trySplice:function(e,f){var g=this._super(e,f);if(g===undefined){return}var b=g.removedItems;var d=g.addedItems;var c=JW.Map.map(d,function(h){return new JW.UI.Component.Child(this.component,h)},this);var a=this.target.trySplice(JW.Map.getRemovedKeys(b,d),c);return g},tryClear:function(){var a=this._super();if(a===undefined){return}this.target.tryClear();return a},tryReindex:function(b){var a=this._super(b);if(a===undefined){return}this.target.tryReindex(b);return a}});JW.UI.Component.Collection=function(b,c,a){JW.UI.Component.Collection._super.call(this);this.parent=b;this.source=c;JW.Set.add(b._collections,this);this._mapper=c.createMapper({createItem:function(d){this.parent._initChild(d);return d},destroyItem:function(d){this.parent._doneChild(d)},scope:this});this._inserter=new JW.UI.Component.CollectionInserter(this._mapper.target,a[0])};JW.extend(JW.UI.Component.Collection,JW.Class,{destroyObject:function(){this._inserter.destroy();
this._inserter=null;this._mapper.destroy();this._mapper=null;JW.Set.remove(this.parent._collections,this);this._super()},_afterAppend:function(){this.source.each(JW.UI._afterAppend)}});JW.UI.Component.CollectionInserter=function(b,a){JW.UI.Component.CollectionInserter._super.call(this);this.el=a;this.len=0;this.own(b.createObserver({addItem:this._addItem,removeItem:this._removeItem,scope:this}))};JW.extend(JW.UI.Component.CollectionInserter,JW.Class,{_addItem:function(c){var b=this.el;var a=b.childNodes[this.len];var d=c.el[0];if(a!=null){b.insertBefore(d,a)}else{b.appendChild(d)}++this.len;c._afterAppend()},_removeItem:function(a){JW.UI.remove(a.el[0]);--this.len}});JW.UI.Component.DomTemplate=function(a){JW.UI.Component.DomTemplate._super.call(this);this.el=jQuery(a)[0];this.output=null};JW.extend(JW.UI.Component.DomTemplate,JW.UI.Component.AbstractTemplate,{requiresAfterAppend:true,createElement:function(){if(this.output!==null){return this.output}this.groups={};this._compileAttributes(this.el);var c={};for(var b=0,a=this.ids.length;b<a;++b){var d=this.ids[b];c[d]=this.groups[d]}this.output=new JW.UI.Component.TemplateOutput(this.el,c);return this.output},_addElement:function(c,a,b){this.groups[c]=this.groups[c]||[];this.groups[c].push(a)}});JW.UI.Component.Inserter=function(b,a){JW.UI.Component.Inserter._super.call(this,b,a)};JW.extend(JW.UI.Component.Inserter,JW.UI.Inserter,{_getElement:function(a){return a.el[0]},_addItem:function(b,a){this._super(b,a);b._afterAppend()}});JW.UI.Component.Replaceable=function(b,a,c){JW.UI.Component.Replaceable._super.call(this);this.parent=b;this.id=c;JW.Set.add(b._replaceables,this);this._switcher=new JW.Switcher([a],{init:function(d){this.parent.children.set(d,this.id)},done:function(){this.parent.children.remove(this.id)},scope:this})};JW.extend(JW.UI.Component.Replaceable,JW.Class,{destroyObject:function(){this._switcher.destroy();this._switcher=null;JW.Set.remove(this.parent._replaceables,this);this._super()}});JW.UI.Component.Template=function(a){JW.UI.Component.Template._super.call(this);this.html=a;this.mirror=null;this.groups=null};JW.extend(JW.UI.Component.Template,JW.UI.Component.AbstractTemplate,{requiresAfterAppend:false,createElement:function(){this._compile();var k=this.mirror.cloneNode(true);var d={};for(var h=0,g=this.ids.length;h<g;++h){var a=this.ids[h];var p=this.groups[a];var m=p.length;var l=new Array(m);for(var f=0;f<m;++f){var o=p[f];var b=k;for(var e=0,c=o.length;e<c;++e){b=b.childNodes[o[e]]}l[f]=b}d[a]=l}return new JW.UI.Component.TemplateOutput(k,d)},_compile:function(){if(this.mirror!==null){return}this.mirror=JW.UI.parseHtml(this.html);this.groups={};this._compileAttributes(this.mirror)},_addElement:function(c,a,b){this.groups[c]=this.groups[c]||[];this.groups[c].push(b.concat())}});JW.UI.template(JW.UI.Component,{main:"<div></div>"});JW.UI.Component.TemplateOutput=function(b,a){JW.UI.Component.TemplateOutput._super.call(this);this.root=b;this.groups=a};JW.extend(JW.UI.Component.TemplateOutput,JW.Class,{});JW.UI.Hash=function(){JW.UI.Hash._super.call(this,location.hash.substr(1));jQuery(window).jwon("hashchange",function(){JW.UI.hash.set(location.hash.substr(1))},this)};JW.extend(JW.UI.Hash,JW.Property,{set:function(c,a){c=c||"";var b=this._value;if(b===c){return}this._value=c;if(a&&window.history&&history.replaceState){history.replaceState(null,"",location.pathname+"#"+c)}else{location.hash="#"+c}this.changeEvent.trigger(new JW.ValueChangeEventParams(this,c,b))}});JW.UI.hash=new JW.UI.Hash();JW.UI.Params={};(function(){if(!location.search.length){return}var c=location.search.substr(1).split("&");for(var a=0;a<c.length;++a){var b=c[a].split("=");if(b.length!=2){continue}JW.UI.Params[b[0]]=decodeURIComponent(b[1]).replace(/\+/g," ")}})();JW.UI.preloadImage=function(c,d,a){var b=new Image();jQuery(b).load(function(){if(typeof d==="function"){d.call(a,b)}}).error(function(){if(typeof d==="function"){d.call(a)}}).attr("src",c)};JW.UI.AttrUpdater=function(b,a,c){JW.UI.AttrUpdater._super.call(this);this.el=jQuery(b);this.attr=a;this.property=c;this._update();this.own(c.changeEvent.bind(this._update,this))};JW.extend(JW.UI.AttrUpdater,JW.Class,{destroyObject:function(){this.el=null;this.property=null;this._super()},_update:function(){this.el.attr(this.attr,this.property.get())}});JW.UI.CheckedListener=function(b,a){this._update=JW.inScope(this._update,this);JW.UI.CheckedListener._super.call(this);a=(a instanceof JW.Property)?{target:a}:(a||{});this.el=jQuery(b);this._targetCreated=a.target==null;this.target=this._targetCreated?new JW.Property():a.target;this.property=this.target;this._update();this.el.bind("change",this._update)};JW.extend(JW.UI.CheckedListener,JW.Class,{destroyObject:function(){this.el.unbind("change",this._update);if(this._targetCreated){this.target.destroy()}this.el=null;this.target=null;this.property=null;this._super()},_update:function(){this.target.set(this.el.prop("checked"))}});JW.UI.ClassNameUpdater=function(a,b){JW.UI.ClassNameUpdater._super.call(this);this.el=jQuery(a);this.own(new JW.Switcher([b],{init:function(c){this.el.addClass(c)},done:function(c){this.el.removeClass(c)},scope:this}))};JW.extend(JW.UI.ClassNameUpdater,JW.Class);JW.UI.ClassUpdater=function(b,a,c){JW.UI.ClassUpdater._super.call(this);this.el=jQuery(b);this.cls=a;this.property=c;this._update();this.own(c.changeEvent.bind(this._update,this))};JW.extend(JW.UI.ClassUpdater,JW.Class,{destroyObject:function(){this.el=null;this.property=null;this._super()},_update:function(){this.el.toggleClass(this.cls,!!this.property.get())}});JW.UI.CssUpdater=function(b,a,c){JW.UI.CssUpdater._super.call(this);this.el=jQuery(b);this.style=a;this.property=c;this._update();this.own(c.changeEvent.bind(this._update,this))};JW.extend(JW.UI.CssUpdater,JW.Class,{destroyObject:function(){this.el=null;this.property=null;this._super()},_update:function(){this.el.css(this.style,this.property.get())}});JW.UI.HtmlUpdater=function(a,b){JW.UI.HtmlUpdater._super.call(this);this.el=jQuery(a);this.property=b;this._update();this.own(b.changeEvent.bind(this._update,this))};JW.extend(JW.UI.HtmlUpdater,JW.Class,{destroyObject:function(){this.el=null;this.property=null;this._super()},_update:function(){this.el.html(this.property.get())}});JW.UI.PropBinding=function(a,d,b,c){JW.UI.PropBinding._super.call(this);c=c||JW.UPDATE;if(c&JW.UPDATE){this.own(new JW.UI.PropUpdater(a,d,b))}if(d==="checked"&&(c&JW.WATCH)){this.own(new JW.UI.CheckedListener(a,{target:b}))}};JW.extend(JW.UI.PropBinding,JW.Class);JW.UI.PropUpdater=function(a,c,b){JW.UI.PropUpdater._super.call(this);this.el=jQuery(a);this.prop=c;this.property=b;this._update();this.own(b.changeEvent.bind(this._update,this))};JW.extend(JW.UI.PropUpdater,JW.Class,{destroyObject:function(){this.el=null;this.property=null;this._super()},_update:function(){this.el.prop(this.prop,this.property.get());if(this.prop==="checked"){this.el.change()}}});JW.UI.RadioBinding=function(b,a,c,d){JW.UI.RadioBinding._super.call(this);d=d||JW.UPDATE;if(d&JW.UPDATE){this.own(new JW.UI.RadioUpdater(b,a,c))}if(d&JW.WATCH){this.own(new JW.UI.RadioListener(b,a,{target:c}))}};JW.extend(JW.UI.RadioBinding,JW.Class);JW.UI.RadioListener=function(c,b,a){this._update=JW.inScope(this._update,this);JW.UI.RadioListener._super.call(this);a=(a instanceof JW.Property)?{target:a}:(a||{});this.el=jQuery(c);this.name=b;this._targetCreated=a.target==null;this.target=this._targetCreated?new JW.Property():a.target;this.property=this.target;this._selector="input[type=radio][name='"+b+"']";this._update();this.el.on("change",this._selector,this._update)};JW.extend(JW.UI.RadioListener,JW.Class,{destroyObject:function(){this.el.off("change",this._selector,this._update);if(this._targetCreated){this.target.destroy()}this.el=null;this.target=null;this.property=null;this._super()},_update:function(){var a=this.el.find(this._selector+":checked");this.target.set((a.length!==0)?a.attr("value"):null)}});JW.UI.RadioUpdater=function(b,a,c){JW.UI.RadioUpdater._super.call(this);
this.el=jQuery(b);this.name=a;this.property=c;this._selector="input[type=radio][name='"+a+"']";this._update();this.own(c.changeEvent.bind(this._update,this))};JW.extend(JW.UI.RadioUpdater,JW.Class,{destroyObject:function(){this.el=null;this.property=null;this._super()},_update:function(){var b=this.property.get();if(JW.isSet(b)){var a=this.el.find(this._selector+"[value='"+b+"']");if(a.length!==0){a.prop("checked",true).change();return}}this.el.find(this._selector+":checked").prop("checked",false).change()}});JW.UI.TextUpdater=function(a,b){JW.UI.TextUpdater._super.call(this);this.el=jQuery(a);this.property=b;this._update();this.own(b.changeEvent.bind(this._update,this))};JW.extend(JW.UI.TextUpdater,JW.Class,{destroyObject:function(){this.el=null;this.property=null;this._super()},_update:function(){this.el[0].textContent=this.property.get()}});JW.UI.ValueBinding=function(a,b,c,d){JW.UI.ValueBinding._super.call(this);c=c||JW.UPDATE;if(c&JW.UPDATE){this.own(new JW.UI.ValueUpdater(a,b))}if(c&JW.WATCH){this.own(new JW.UI.ValueListener(a,{target:b,simple:d}))}};JW.extend(JW.UI.ValueBinding,JW.Class);JW.UI.ValueListener=function(b,a,c){this._update=JW.inScope(this._update,this);JW.UI.ValueListener._super.call(this);a=(a instanceof JW.Property)?{target:a,simple:c}:(a||{});this.el=jQuery(b);this._targetCreated=a.target==null;this.target=this._targetCreated?new JW.Property():a.target;this.property=this.target;this.simple=a.simple||!JW.UI.isLifeInput(b);this._update();this.el.bind("change",this._update);if(!this.simple){this._timer=setInterval(this._update,100)}};JW.extend(JW.UI.ValueListener,JW.Class,{destroyObject:function(){if(!this.simple){clearInterval(this._timer)}this.el.unbind("change",this._update);if(this._targetCreated){this.target.destroy()}this.el=null;this.target=null;this.property=null;this._super()},_update:function(){this.target.set(this.el.val())}});JW.UI.ValueUpdater=function(a,b){JW.UI.ValueUpdater._super.call(this);this.el=jQuery(a);this.property=b;this._update();this.own(b.changeEvent.bind(this._update,this))};JW.extend(JW.UI.ValueUpdater,JW.Class,{destroyObject:function(){this.el=null;this.property=null;this._super()},_update:function(){var a=this.property.get();if(this.el.val()!==a){this.el.val(a).change()}}});JW.UI.VisibleUpdater=function(a,b){JW.UI.VisibleUpdater._super.call(this);this.el=jQuery(a);this.property=b;this._update();this.own(b.changeEvent.bind(this._update,this))};JW.extend(JW.UI.VisibleUpdater,JW.Class,{destroyObject:function(){this.el=null;this.property=null;this._super()},_update:function(){this.el.css("display",this.property.get()?"":"none")}});